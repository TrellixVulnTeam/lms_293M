{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\LibraryManagementSystem\\\\librarymanagement\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { lastValueFrom } from 'rxjs';\nlet SearchBookComponent = class SearchBookComponent {\n  constructor(databaseService, _snackBar) {\n    this.databaseService = databaseService;\n    this._snackBar = _snackBar;\n    this.displayedColumns = ['id', 'bookName', 'authorName', 'isbnNumber', 'price', 'stockQuantity'];\n    this.books = [];\n    this.totalBooksCount = 0;\n    this.pageSize = 8;\n    this.searchedInput = '';\n    this.currentPageIndex = 0;\n    this.isLoggedIn = false;\n    this.userId = sessionStorage.getItem('userId');\n    this.role = sessionStorage.getItem('role');\n    this.userName = sessionStorage.getItem('userName');\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.userId != null) {\n        _this.isLoggedIn = true;\n      }\n\n      var data = yield _this.databaseService.getBooks().toPromise();\n      _this.booksList = data;\n      _this.books = _this.booksList;\n      _this.totalBooksCount = _this.books.length;\n      _this.books = _this.books.slice(0, _this.pageSize);\n    })();\n  }\n\n  changePage(event) {\n    var tempBooks = this.booksList;\n    this.books = tempBooks.slice(event.pageIndex * this.pageSize, (event.pageIndex + 1) * this.pageSize);\n  }\n\n  filterBooks(event) {\n    this.searchedInput = event.target.value;\n    var tempBooks = this.booksList;\n    var tempBooks2 = [];\n\n    for (var i = 0; i < tempBooks.length; i++) {\n      if (tempBooks[i].bookName.includes(this.searchedInput) || tempBooks[i].authorName.includes(this.searchedInput)) {\n        tempBooks2.push(tempBooks[i]);\n      }\n    }\n\n    this.books = tempBooks2;\n    this.totalBooksCount = this.books.length;\n    this.books = this.books.slice(this.currentPageIndex * this.pageSize, (this.currentPageIndex + 1) * this.pageSize);\n  }\n\n  addBookToCart(bookId) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var cart = yield lastValueFrom(_this2.databaseService.getCartByUserId(_this2.userId));\n      cart[0].BookId.push(bookId);\n      yield lastValueFrom(_this2.databaseService.addBookInCart(cart[0]));\n    })();\n  }\n\n  openSnackBar() {\n    this._snackBar.open('Cannonball!!', 'Splash', {\n      horizontalPosition: this.horizontalPosition,\n      verticalPosition: this.verticalPosition\n    });\n  }\n\n};\nSearchBookComponent = __decorate([Component({\n  selector: 'app-search-book',\n  templateUrl: './search-book.component.html',\n  styleUrls: ['./search-book.component.scss']\n})], SearchBookComponent);\nexport { SearchBookComponent };","map":{"version":3,"sources":["C:/LibraryManagementSystem/librarymanagement/src/app/shared/search-book/search-book.component.ts"],"names":["__decorate","Component","lastValueFrom","SearchBookComponent","constructor","databaseService","_snackBar","displayedColumns","books","totalBooksCount","pageSize","searchedInput","currentPageIndex","isLoggedIn","userId","sessionStorage","getItem","role","userName","ngOnInit","data","getBooks","toPromise","booksList","length","slice","changePage","event","tempBooks","pageIndex","filterBooks","target","value","tempBooks2","i","bookName","includes","authorName","push","addBookToCart","bookId","cart","getCartByUserId","BookId","addBookInCart","openSnackBar","open","horizontalPosition","verticalPosition","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { lastValueFrom } from 'rxjs';\r\nlet SearchBookComponent = class SearchBookComponent {\r\n    constructor(databaseService, _snackBar) {\r\n        this.databaseService = databaseService;\r\n        this._snackBar = _snackBar;\r\n        this.displayedColumns = [\r\n            'id',\r\n            'bookName',\r\n            'authorName',\r\n            'isbnNumber',\r\n            'price',\r\n            'stockQuantity',\r\n        ];\r\n        this.books = [];\r\n        this.totalBooksCount = 0;\r\n        this.pageSize = 8;\r\n        this.searchedInput = '';\r\n        this.currentPageIndex = 0;\r\n        this.isLoggedIn = false;\r\n        this.userId = sessionStorage.getItem('userId');\r\n        this.role = sessionStorage.getItem('role');\r\n        this.userName = sessionStorage.getItem('userName');\r\n    }\r\n    async ngOnInit() {\r\n        if (this.userId != null) {\r\n            this.isLoggedIn = true;\r\n        }\r\n        var data = await this.databaseService.getBooks().toPromise();\r\n        this.booksList = data;\r\n        this.books = this.booksList;\r\n        this.totalBooksCount = this.books.length;\r\n        this.books = this.books.slice(0, this.pageSize);\r\n    }\r\n    changePage(event) {\r\n        var tempBooks = this.booksList;\r\n        this.books = tempBooks.slice(event.pageIndex * this.pageSize, (event.pageIndex + 1) * this.pageSize);\r\n    }\r\n    filterBooks(event) {\r\n        this.searchedInput = event.target.value;\r\n        var tempBooks = this.booksList;\r\n        var tempBooks2 = [];\r\n        for (var i = 0; i < tempBooks.length; i++) {\r\n            if (tempBooks[i].bookName.includes(this.searchedInput) ||\r\n                tempBooks[i].authorName.includes(this.searchedInput)) {\r\n                tempBooks2.push(tempBooks[i]);\r\n            }\r\n        }\r\n        this.books = tempBooks2;\r\n        this.totalBooksCount = this.books.length;\r\n        this.books = this.books.slice(this.currentPageIndex * this.pageSize, (this.currentPageIndex + 1) * this.pageSize);\r\n    }\r\n    async addBookToCart(bookId) {\r\n        var cart = await lastValueFrom(this.databaseService.getCartByUserId(this.userId));\r\n        cart[0].BookId.push(bookId);\r\n        await lastValueFrom(this.databaseService.addBookInCart(cart[0]));\r\n    }\r\n    openSnackBar() {\r\n        this._snackBar.open('Cannonball!!', 'Splash', {\r\n            horizontalPosition: this.horizontalPosition,\r\n            verticalPosition: this.verticalPosition,\r\n        });\r\n    }\r\n};\r\nSearchBookComponent = __decorate([\r\n    Component({\r\n        selector: 'app-search-book',\r\n        templateUrl: './search-book.component.html',\r\n        styleUrls: ['./search-book.component.scss'],\r\n    })\r\n], SearchBookComponent);\r\nexport { SearchBookComponent };\r\n"]},"metadata":{},"sourceType":"module"}