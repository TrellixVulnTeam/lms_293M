{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\abduf\\\\Desktop\\\\librarymanagement\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/database-service.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nexport class LoginComponent {\n  constructor(databaseService, http, router) {\n    this.databaseService = databaseService;\n    this.http = http;\n    this.router = router;\n    this.email = '';\n    this.hasError = false;\n    this.user = [];\n  }\n\n  ngOnInit() {\n    var userId = sessionStorage.getItem('userId');\n\n    if (userId != null) {\n      this.router.navigateByUrl('/search');\n    }\n  }\n\n  login() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var emailBox = document.getElementById('email');\n      var email = emailBox.value;\n      var passwordBox = document.getElementById('password');\n      var password = passwordBox.value;\n      _this.user = yield lastValueFrom(_this.databaseService.getUserByEmail(email, password));\n      sessionStorage.setItem('userId', _this.user[0].id);\n      sessionStorage.setItem('role', _this.user[0].role);\n      sessionStorage.setItem('userName', _this.user[0].userFirstName + ' ' + _this.user[0].userLastName);\n      localStorage.setItem('token', \"yayaya\");\n      window.location.reload();\n    })();\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.DatabaseServiceService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 7,\n  vars: 0,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-6\", \"login\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"Enter email\", 1, \"emailTextBox\"], [\"type\", \"password\", \"id\", \"password\", \"placeholder\", \"Enter password\", 1, \"passwordTextBox\"], [1, \"loginButton\", 3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelement(3, \"input\", 3);\n      i0.ɵɵelement(4, \"input\", 4);\n      i0.ɵɵelementStart(5, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_5_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(6, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".login[_ngcontent-%COMP%] {\\n  height: 400px;\\n  width: 30%;\\n  background-color: rgba(139, 199, 99, 0.795);\\n  position: absolute;\\n  left: 35%;\\n  margin-top: 6%;\\n}\\n\\n.emailTextBox[_ngcontent-%COMP%], .passwordTextBox[_ngcontent-%COMP%] {\\n  width: 80%;\\n  height: 35px;\\n  margin-top: 15%;\\n  border: none;\\n  margin-left: 10%;\\n  font-family: Roboto;\\n  font-weight: 500;\\n}\\n\\n.emailTextBox[_ngcontent-%COMP%]:focus, .passwordTextBox[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n}\\n\\n.loginButton[_ngcontent-%COMP%] {\\n  margin-top: 10%;\\n  width: 40%;\\n  margin-left: 30%;\\n  height: 35px;\\n  border: none;\\n  background-color: rgba(93, 158, 50, 0.933);\\n  color: white;\\n  font-family: Roboto;\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLFVBQUE7RUFDQSwyQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLGNBQUE7QUFDRjs7QUFFQTs7RUFFRSxVQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsYUFBQTtBQUNGOztBQUVBO0VBQ0UsZUFBQTtFQUNBLFVBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsMENBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtBQUNGIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvZ2luIHtcclxuICBoZWlnaHQ6IDQwMHB4O1xyXG4gIHdpZHRoOiAzMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMzksIDE5OSwgOTksIDAuNzk1KTtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogMzUlO1xyXG4gIG1hcmdpbi10b3A6IDYlO1xyXG59XHJcblxyXG4uZW1haWxUZXh0Qm94LFxyXG4ucGFzc3dvcmRUZXh0Qm94IHtcclxuICB3aWR0aDogODAlO1xyXG4gIGhlaWdodDogMzVweDtcclxuICBtYXJnaW4tdG9wOiAxNSU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIG1hcmdpbi1sZWZ0OiAxMCU7XHJcbiAgZm9udC1mYW1pbHk6IFJvYm90bztcclxuICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4uZW1haWxUZXh0Qm94OmZvY3VzLFxyXG4ucGFzc3dvcmRUZXh0Qm94OmZvY3VzIHtcclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcblxyXG4ubG9naW5CdXR0b24ge1xyXG4gIG1hcmdpbi10b3A6IDEwJTtcclxuICB3aWR0aDogNDAlO1xyXG4gIG1hcmdpbi1sZWZ0OiAzMCU7XHJcbiAgaGVpZ2h0OiAzNXB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDkzLCAxNTgsIDUwLCAwLjkzMyk7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGZvbnQtZmFtaWx5OiBSb2JvdG87XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/abduf/Desktop/librarymanagement/src/app/shared/login/login.component.ts"],"names":["lastValueFrom","i0","i1","i2","i3","LoginComponent","constructor","databaseService","http","router","email","hasError","user","ngOnInit","userId","sessionStorage","getItem","navigateByUrl","login","emailBox","document","getElementById","value","passwordBox","password","getUserByEmail","setItem","id","role","userFirstName","userLastName","localStorage","window","location","reload","ɵfac","LoginComponent_Factory","t","ɵɵdirectiveInject","DatabaseServiceService","HttpClient","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵlistener","LoginComponent_Template_button_click_5_listener","ɵɵtext","ɵɵelementEnd","styles"],"mappings":";AAAA,SAASA,aAAT,QAA8B,MAA9B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,2CAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,MAAMC,cAAN,CAAqB;AACxBC,EAAAA,WAAW,CAACC,eAAD,EAAkBC,IAAlB,EAAwBC,MAAxB,EAAgC;AACvC,SAAKF,eAAL,GAAuBA,eAAvB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,IAAL,GAAY,EAAZ;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,QAAIC,MAAM,GAAGC,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAAb;;AACA,QAAIF,MAAM,IAAI,IAAd,EAAoB;AAChB,WAAKL,MAAL,CAAYQ,aAAZ,CAA0B,SAA1B;AACH;AACJ;;AACKC,EAAAA,KAAK,GAAG;AAAA;;AAAA;AACV,UAAIC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAf;AACA,UAAIX,KAAK,GAAGS,QAAQ,CAACG,KAArB;AACA,UAAIC,WAAW,GAAGH,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAlB;AACA,UAAIG,QAAQ,GAAGD,WAAW,CAACD,KAA3B;AACA,MAAA,KAAI,CAACV,IAAL,SAAkBZ,aAAa,CAAC,KAAI,CAACO,eAAL,CAAqBkB,cAArB,CAAoCf,KAApC,EAA2Cc,QAA3C,CAAD,CAA/B;AACAT,MAAAA,cAAc,CAACW,OAAf,CAAuB,QAAvB,EAAiC,KAAI,CAACd,IAAL,CAAU,CAAV,EAAae,EAA9C;AACAZ,MAAAA,cAAc,CAACW,OAAf,CAAuB,MAAvB,EAA+B,KAAI,CAACd,IAAL,CAAU,CAAV,EAAagB,IAA5C;AACAb,MAAAA,cAAc,CAACW,OAAf,CAAuB,UAAvB,EAAmC,KAAI,CAACd,IAAL,CAAU,CAAV,EAAaiB,aAAb,GAA6B,GAA7B,GAAmC,KAAI,CAACjB,IAAL,CAAU,CAAV,EAAakB,YAAnF;AACAC,MAAAA,YAAY,CAACL,OAAb,CAAqB,OAArB,EAA8B,QAA9B;AACAM,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAVU;AAWb;;AA1BuB;;AA4B5B7B,cAAc,CAAC8B,IAAf,GAAsB,SAASC,sBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAO,KAAKA,CAAC,IAAIhC,cAAV,EAA0BJ,EAAE,CAACqC,iBAAH,CAAqBpC,EAAE,CAACqC,sBAAxB,CAA1B,EAA2EtC,EAAE,CAACqC,iBAAH,CAAqBnC,EAAE,CAACqC,UAAxB,CAA3E,EAAgHvC,EAAE,CAACqC,iBAAH,CAAqBlC,EAAE,CAACqC,MAAxB,CAAhH,CAAP;AAA0J,CAArN;;AACApC,cAAc,CAACqC,IAAf,GAAsB,aAAczC,EAAE,CAAC0C,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAEvC,cAAR;AAAwBwC,EAAAA,SAAS,EAAE,CAAC,CAAC,WAAD,CAAD,CAAnC;AAAoDC,EAAAA,KAAK,EAAE,CAA3D;AAA8DC,EAAAA,IAAI,EAAE,CAApE;AAAuEC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,WAAJ,CAAD,EAAmB,CAAC,CAAD,EAAI,KAAJ,CAAnB,EAA+B,CAAC,CAAD,EAAI,UAAJ,EAAgB,OAAhB,CAA/B,EAAyD,CAAC,MAAD,EAAS,OAAT,EAAkB,IAAlB,EAAwB,OAAxB,EAAiC,aAAjC,EAAgD,aAAhD,EAA+D,CAA/D,EAAkE,cAAlE,CAAzD,EAA4I,CAAC,MAAD,EAAS,UAAT,EAAqB,IAArB,EAA2B,UAA3B,EAAuC,aAAvC,EAAsD,gBAAtD,EAAwE,CAAxE,EAA2E,iBAA3E,CAA5I,EAA2O,CAAC,CAAD,EAAI,aAAJ,EAAmB,CAAnB,EAAsB,OAAtB,CAA3O,CAA/E;AAA2VC,EAAAA,QAAQ,EAAE,SAASC,uBAAT,CAAiCC,EAAjC,EAAqCC,GAArC,EAA0C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC9clD,MAAAA,EAAE,CAACoD,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACApD,MAAAA,EAAE,CAACoD,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACApD,MAAAA,EAAE,CAACoD,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACApD,MAAAA,EAAE,CAACqD,SAAH,CAAa,CAAb,EAAgB,OAAhB,EAAyB,CAAzB;AACArD,MAAAA,EAAE,CAACqD,SAAH,CAAa,CAAb,EAAgB,OAAhB,EAAyB,CAAzB;AACArD,MAAAA,EAAE,CAACoD,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,CAA/B;AACApD,MAAAA,EAAE,CAACsD,UAAH,CAAc,OAAd,EAAuB,SAASC,+CAAT,GAA2D;AAAE,eAAOJ,GAAG,CAAClC,KAAJ,EAAP;AAAqB,OAAzG;AACAjB,MAAAA,EAAE,CAACwD,MAAH,CAAU,CAAV,EAAa,OAAb;AACAxD,MAAAA,EAAE,CAACyD,YAAH;AACAzD,MAAAA,EAAE,CAACyD,YAAH;AACAzD,MAAAA,EAAE,CAACyD,YAAH;AACAzD,MAAAA,EAAE,CAACyD,YAAH;AACH;AAAE,GAbkD;AAahDC,EAAAA,MAAM,EAAE,CAAC,wsEAAD;AAbwC,CAArB,CAApC","sourcesContent":["import { lastValueFrom } from 'rxjs';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/database-service.service\";\r\nimport * as i2 from \"@angular/common/http\";\r\nimport * as i3 from \"@angular/router\";\r\nexport class LoginComponent {\r\n    constructor(databaseService, http, router) {\r\n        this.databaseService = databaseService;\r\n        this.http = http;\r\n        this.router = router;\r\n        this.email = '';\r\n        this.hasError = false;\r\n        this.user = [];\r\n    }\r\n    ngOnInit() {\r\n        var userId = sessionStorage.getItem('userId');\r\n        if (userId != null) {\r\n            this.router.navigateByUrl('/search');\r\n        }\r\n    }\r\n    async login() {\r\n        var emailBox = document.getElementById('email');\r\n        var email = emailBox.value;\r\n        var passwordBox = document.getElementById('password');\r\n        var password = passwordBox.value;\r\n        this.user = await lastValueFrom(this.databaseService.getUserByEmail(email, password));\r\n        sessionStorage.setItem('userId', this.user[0].id);\r\n        sessionStorage.setItem('role', this.user[0].role);\r\n        sessionStorage.setItem('userName', this.user[0].userFirstName + ' ' + this.user[0].userLastName);\r\n        localStorage.setItem('token', \"yayaya\");\r\n        window.location.reload();\r\n    }\r\n}\r\nLoginComponent.ɵfac = function LoginComponent_Factory(t) { return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.DatabaseServiceService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router)); };\r\nLoginComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LoginComponent, selectors: [[\"app-login\"]], decls: 7, vars: 0, consts: [[1, \"container\"], [1, \"row\"], [1, \"col-md-6\", \"login\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"Enter email\", 1, \"emailTextBox\"], [\"type\", \"password\", \"id\", \"password\", \"placeholder\", \"Enter password\", 1, \"passwordTextBox\"], [1, \"loginButton\", 3, \"click\"]], template: function LoginComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelement(3, \"input\", 3);\r\n        i0.ɵɵelement(4, \"input\", 4);\r\n        i0.ɵɵelementStart(5, \"button\", 5);\r\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_5_listener() { return ctx.login(); });\r\n        i0.ɵɵtext(6, \"Login\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } }, styles: [\".login[_ngcontent-%COMP%] {\\n  height: 400px;\\n  width: 30%;\\n  background-color: rgba(139, 199, 99, 0.795);\\n  position: absolute;\\n  left: 35%;\\n  margin-top: 6%;\\n}\\n\\n.emailTextBox[_ngcontent-%COMP%], .passwordTextBox[_ngcontent-%COMP%] {\\n  width: 80%;\\n  height: 35px;\\n  margin-top: 15%;\\n  border: none;\\n  margin-left: 10%;\\n  font-family: Roboto;\\n  font-weight: 500;\\n}\\n\\n.emailTextBox[_ngcontent-%COMP%]:focus, .passwordTextBox[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n}\\n\\n.loginButton[_ngcontent-%COMP%] {\\n  margin-top: 10%;\\n  width: 40%;\\n  margin-left: 30%;\\n  height: 35px;\\n  border: none;\\n  background-color: rgba(93, 158, 50, 0.933);\\n  color: white;\\n  font-family: Roboto;\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLFVBQUE7RUFDQSwyQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLGNBQUE7QUFDRjs7QUFFQTs7RUFFRSxVQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsYUFBQTtBQUNGOztBQUVBO0VBQ0UsZUFBQTtFQUNBLFVBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsMENBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtBQUNGIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvZ2luIHtcclxuICBoZWlnaHQ6IDQwMHB4O1xyXG4gIHdpZHRoOiAzMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMzksIDE5OSwgOTksIDAuNzk1KTtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogMzUlO1xyXG4gIG1hcmdpbi10b3A6IDYlO1xyXG59XHJcblxyXG4uZW1haWxUZXh0Qm94LFxyXG4ucGFzc3dvcmRUZXh0Qm94IHtcclxuICB3aWR0aDogODAlO1xyXG4gIGhlaWdodDogMzVweDtcclxuICBtYXJnaW4tdG9wOiAxNSU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIG1hcmdpbi1sZWZ0OiAxMCU7XHJcbiAgZm9udC1mYW1pbHk6IFJvYm90bztcclxuICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4uZW1haWxUZXh0Qm94OmZvY3VzLFxyXG4ucGFzc3dvcmRUZXh0Qm94OmZvY3VzIHtcclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcblxyXG4ubG9naW5CdXR0b24ge1xyXG4gIG1hcmdpbi10b3A6IDEwJTtcclxuICB3aWR0aDogNDAlO1xyXG4gIG1hcmdpbi1sZWZ0OiAzMCU7XHJcbiAgaGVpZ2h0OiAzNXB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDkzLCAxNTgsIDUwLCAwLjkzMyk7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGZvbnQtZmFtaWx5OiBSb2JvdG87XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG4iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}