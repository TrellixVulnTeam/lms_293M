{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\LibraryManagementSystem\\\\librarymanagement\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/database-service.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction CartComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const book_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r1.bookName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r1.authorName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r1.price);\n  }\n}\n\nexport class CartComponent {\n  constructor(databaseService) {\n    this.databaseService = databaseService;\n    this.isLoggedIn = false;\n    this.userId = sessionStorage.getItem('userId');\n    this.role = sessionStorage.getItem('role');\n    this.userName = sessionStorage.getItem('userName');\n    this.cart = [];\n    this.booksInCart = [];\n    this.books = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.userId != null) {\n        _this.isLoggedIn = true;\n      }\n\n      if (_this.isLoggedIn) {\n        _this.cart = yield lastValueFrom(_this.databaseService.getCartByUserId(_this.userId));\n        _this.books = yield lastValueFrom(_this.databaseService.getBooks());\n\n        _this.changeOrderFormat();\n      }\n    })();\n  }\n\n  changeOrderFormat() {\n    for (var j = 0; j < this.cart[0].BookId.length; j++) {\n      for (var k = 0; k < this.books.length; k++) {\n        if (this.cart[0].BookId[j] == this.books[k].id) {\n          this.booksInCart.push(this.books[k]);\n        }\n      }\n    }\n  }\n\n}\n\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.DatabaseServiceService));\n};\n\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 18,\n  vars: 1,\n  consts: [[1, \"container\", \"mainBody\"], [1, \"row\"], [1, \"col-lg-12\", \"searchBar\"], [3, \"click\"], [1, \"col-md-12\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function CartComponent_Template_button_click_3_listener() {\n        return ctx.checkoutCart();\n      });\n      i0.ɵɵtext(4, \"Checkout cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 1);\n      i0.ɵɵelementStart(6, \"div\", 4);\n      i0.ɵɵelementStart(7, \"table\");\n      i0.ɵɵelementStart(8, \"tr\");\n      i0.ɵɵelementStart(9, \"th\");\n      i0.ɵɵtext(10, \"Id\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Book Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Author Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(17, CartComponent_tr_17_Template, 9, 4, \"tr\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.booksInCart);\n    }\n  },\n  directives: [i2.NgForOf],\n  styles: [\".mainBody[_ngcontent-%COMP%] {\\n  max-width: 2000px;\\n  background-color: rgba(216, 208, 208, 0.933);\\n  height: 600px;\\n}\\n\\n.searchBar[_ngcontent-%COMP%] {\\n  background-color: yellowgreen;\\n  padding-top: 10px;\\n  padding-bottom: 10px;\\n}\\n\\n.bookSearchBox[_ngcontent-%COMP%] {\\n  height: 35px;\\n  width: 25%;\\n  border: none;\\n  padding-left: 10px;\\n  font-family: Roboto;\\n  font-weight: 500;\\n  margin-left: 40%;\\n}\\n\\ninput[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  padding-left: 10px;\\n}\\n\\n.booksTable[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-top: 2%;\\n}\\n\\n.returned[_ngcontent-%COMP%] {\\n  background-color: lightgreen;\\n  font-weight: 500;\\n}\\n\\n.notReturned[_ngcontent-%COMP%] {\\n  background-color: #e47575;\\n  font-weight: 500;\\n  color: white;\\n}\\n\\n.returnButton[_ngcontent-%COMP%] {\\n  border: none;\\n}\\n\\n.returnButton[_ngcontent-%COMP%]:hover {\\n  box-shadow: 1px 1px 1px 1px grey;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  border-collapse: collapse;\\n  border-spacing: 0;\\n  width: 100%;\\n  border: 1px solid #ddd;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  text-align: left;\\n  padding: 16px;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  background-color: white;\\n  border-bottom: 1px solid gray;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBQTtFQUNBLDRDQUFBO0VBQ0EsYUFBQTtBQUNGOztBQUVBO0VBQ0UsNkJBQUE7RUFDQSxpQkFBQTtFQUNBLG9CQUFBO0FBQ0Y7O0FBRUE7RUFDRSxZQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0VBQ0EsY0FBQTtBQUNGOztBQUVBO0VBQ0UsNEJBQUE7RUFDQSxnQkFBQTtBQUNGOztBQUVBO0VBQ0UseUJBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7QUFDRjs7QUFFQTtFQUNFLGdDQUFBO0FBQ0Y7O0FBRUE7RUFDRSx5QkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLHNCQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsZ0JBQUE7RUFDQSxhQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsdUJBQUE7RUFDQSw2QkFBQTtBQUNGIiwiZmlsZSI6ImNhcnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbkJvZHkge1xyXG4gIG1heC13aWR0aDogMjAwMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjE2LCAyMDgsIDIwOCwgMC45MzMpO1xyXG4gIGhlaWdodDogNjAwcHg7XHJcbn1cclxuXHJcbi5zZWFyY2hCYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHllbGxvd2dyZWVuO1xyXG4gIHBhZGRpbmctdG9wOiAxMHB4O1xyXG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xyXG59XHJcblxyXG4uYm9va1NlYXJjaEJveCB7XHJcbiAgaGVpZ2h0OiAzNXB4O1xyXG4gIHdpZHRoOiAyNSU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmctbGVmdDogMTBweDtcclxuICBmb250LWZhbWlseTogUm9ib3RvO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgbWFyZ2luLWxlZnQ6IDQwJTtcclxufVxyXG5cclxuaW5wdXQ6Zm9jdXMge1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgcGFkZGluZy1sZWZ0OiAxMHB4O1xyXG59XHJcblxyXG4uYm9va3NUYWJsZSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWFyZ2luLXRvcDogMiU7XHJcbn1cclxuXHJcbi5yZXR1cm5lZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmVlbjtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4ubm90UmV0dXJuZWQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMjgsIDExNywgMTE3KTtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLnJldHVybkJ1dHRvbiB7XHJcbiAgYm9yZGVyOiBub25lO1xyXG59XHJcblxyXG4ucmV0dXJuQnV0dG9uOmhvdmVyIHtcclxuICBib3gtc2hhZG93OiAxcHggMXB4IDFweCAxcHggZ3JleTtcclxufVxyXG5cclxudGFibGUge1xyXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxufVxyXG5cclxudGgsXHJcbnRkIHtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbn1cclxuXHJcbnRoLFxyXG50ZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGdyYXk7XHJcbn1cclxuIl19 */\"]\n});","map":{"version":3,"sources":["C:/LibraryManagementSystem/librarymanagement/src/app/shared/cart/cart.component.ts"],"names":["lastValueFrom","i0","i1","i2","CartComponent_tr_17_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","book_r1","$implicit","ɵɵadvance","ɵɵtextInterpolate","id","bookName","authorName","price","CartComponent","constructor","databaseService","isLoggedIn","userId","sessionStorage","getItem","role","userName","cart","booksInCart","books","ngOnInit","getCartByUserId","getBooks","changeOrderFormat","j","BookId","length","k","push","ɵfac","CartComponent_Factory","t","ɵɵdirectiveInject","DatabaseServiceService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CartComponent_Template","ɵɵlistener","CartComponent_Template_button_click_3_listener","checkoutCart","ɵɵtemplate","ɵɵproperty","directives","NgForOf","styles"],"mappings":"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","sourcesContent":["import { lastValueFrom } from 'rxjs';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/database-service.service\";\r\nimport * as i2 from \"@angular/common\";\r\nfunction CartComponent_tr_17_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"tr\");\r\n    i0.ɵɵelementStart(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"td\");\r\n    i0.ɵɵtext(6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"td\");\r\n    i0.ɵɵtext(8);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const book_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(book_r1.id);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(book_r1.bookName);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(book_r1.authorName);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(book_r1.price);\r\n} }\r\nexport class CartComponent {\r\n    constructor(databaseService) {\r\n        this.databaseService = databaseService;\r\n        this.isLoggedIn = false;\r\n        this.userId = sessionStorage.getItem('userId');\r\n        this.role = sessionStorage.getItem('role');\r\n        this.userName = sessionStorage.getItem('userName');\r\n        this.cart = [];\r\n        this.booksInCart = [];\r\n        this.books = [];\r\n    }\r\n    async ngOnInit() {\r\n        if (this.userId != null) {\r\n            this.isLoggedIn = true;\r\n        }\r\n        if (this.isLoggedIn) {\r\n            this.cart = await lastValueFrom(this.databaseService.getCartByUserId(this.userId));\r\n            this.books = await lastValueFrom(this.databaseService.getBooks());\r\n            this.changeOrderFormat();\r\n        }\r\n    }\r\n    changeOrderFormat() {\r\n        for (var j = 0; j < this.cart[0].BookId.length; j++) {\r\n            for (var k = 0; k < this.books.length; k++) {\r\n                if (this.cart[0].BookId[j] == this.books[k].id) {\r\n                    this.booksInCart.push(this.books[k]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nCartComponent.ɵfac = function CartComponent_Factory(t) { return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.DatabaseServiceService)); };\r\nCartComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CartComponent, selectors: [[\"app-cart\"]], decls: 18, vars: 1, consts: [[1, \"container\", \"mainBody\"], [1, \"row\"], [1, \"col-lg-12\", \"searchBar\"], [3, \"click\"], [1, \"col-md-12\"], [4, \"ngFor\", \"ngForOf\"]], template: function CartComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"button\", 3);\r\n        i0.ɵɵlistener(\"click\", function CartComponent_Template_button_click_3_listener() { return ctx.checkoutCart(); });\r\n        i0.ɵɵtext(4, \"Checkout cart\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"div\", 1);\r\n        i0.ɵɵelementStart(6, \"div\", 4);\r\n        i0.ɵɵelementStart(7, \"table\");\r\n        i0.ɵɵelementStart(8, \"tr\");\r\n        i0.ɵɵelementStart(9, \"th\");\r\n        i0.ɵɵtext(10, \"Id\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"th\");\r\n        i0.ɵɵtext(12, \"Book Name\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"th\");\r\n        i0.ɵɵtext(14, \"Author Name\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(15, \"th\");\r\n        i0.ɵɵtext(16, \"Price\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(17, CartComponent_tr_17_Template, 9, 4, \"tr\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(17);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.booksInCart);\r\n    } }, directives: [i2.NgForOf], styles: [\".mainBody[_ngcontent-%COMP%] {\\n  max-width: 2000px;\\n  background-color: rgba(216, 208, 208, 0.933);\\n  height: 600px;\\n}\\n\\n.searchBar[_ngcontent-%COMP%] {\\n  background-color: yellowgreen;\\n  padding-top: 10px;\\n  padding-bottom: 10px;\\n}\\n\\n.bookSearchBox[_ngcontent-%COMP%] {\\n  height: 35px;\\n  width: 25%;\\n  border: none;\\n  padding-left: 10px;\\n  font-family: Roboto;\\n  font-weight: 500;\\n  margin-left: 40%;\\n}\\n\\ninput[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  padding-left: 10px;\\n}\\n\\n.booksTable[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-top: 2%;\\n}\\n\\n.returned[_ngcontent-%COMP%] {\\n  background-color: lightgreen;\\n  font-weight: 500;\\n}\\n\\n.notReturned[_ngcontent-%COMP%] {\\n  background-color: #e47575;\\n  font-weight: 500;\\n  color: white;\\n}\\n\\n.returnButton[_ngcontent-%COMP%] {\\n  border: none;\\n}\\n\\n.returnButton[_ngcontent-%COMP%]:hover {\\n  box-shadow: 1px 1px 1px 1px grey;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  border-collapse: collapse;\\n  border-spacing: 0;\\n  width: 100%;\\n  border: 1px solid #ddd;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  text-align: left;\\n  padding: 16px;\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  background-color: white;\\n  border-bottom: 1px solid gray;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBQTtFQUNBLDRDQUFBO0VBQ0EsYUFBQTtBQUNGOztBQUVBO0VBQ0UsNkJBQUE7RUFDQSxpQkFBQTtFQUNBLG9CQUFBO0FBQ0Y7O0FBRUE7RUFDRSxZQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0VBQ0EsY0FBQTtBQUNGOztBQUVBO0VBQ0UsNEJBQUE7RUFDQSxnQkFBQTtBQUNGOztBQUVBO0VBQ0UseUJBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7QUFDRjs7QUFFQTtFQUNFLGdDQUFBO0FBQ0Y7O0FBRUE7RUFDRSx5QkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLHNCQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsZ0JBQUE7RUFDQSxhQUFBO0FBQ0Y7O0FBRUE7O0VBRUUsdUJBQUE7RUFDQSw2QkFBQTtBQUNGIiwiZmlsZSI6ImNhcnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbkJvZHkge1xyXG4gIG1heC13aWR0aDogMjAwMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjE2LCAyMDgsIDIwOCwgMC45MzMpO1xyXG4gIGhlaWdodDogNjAwcHg7XHJcbn1cclxuXHJcbi5zZWFyY2hCYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHllbGxvd2dyZWVuO1xyXG4gIHBhZGRpbmctdG9wOiAxMHB4O1xyXG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xyXG59XHJcblxyXG4uYm9va1NlYXJjaEJveCB7XHJcbiAgaGVpZ2h0OiAzNXB4O1xyXG4gIHdpZHRoOiAyNSU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmctbGVmdDogMTBweDtcclxuICBmb250LWZhbWlseTogUm9ib3RvO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgbWFyZ2luLWxlZnQ6IDQwJTtcclxufVxyXG5cclxuaW5wdXQ6Zm9jdXMge1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgcGFkZGluZy1sZWZ0OiAxMHB4O1xyXG59XHJcblxyXG4uYm9va3NUYWJsZSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWFyZ2luLXRvcDogMiU7XHJcbn1cclxuXHJcbi5yZXR1cm5lZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmVlbjtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4ubm90UmV0dXJuZWQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMjgsIDExNywgMTE3KTtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLnJldHVybkJ1dHRvbiB7XHJcbiAgYm9yZGVyOiBub25lO1xyXG59XHJcblxyXG4ucmV0dXJuQnV0dG9uOmhvdmVyIHtcclxuICBib3gtc2hhZG93OiAxcHggMXB4IDFweCAxcHggZ3JleTtcclxufVxyXG5cclxudGFibGUge1xyXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxufVxyXG5cclxudGgsXHJcbnRkIHtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIHBhZGRpbmc6IDE2cHg7XHJcbn1cclxuXHJcbnRoLFxyXG50ZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGdyYXk7XHJcbn1cclxuIl19 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}