{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\LibraryManagementSystem\\\\librarymanagement\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ManageBookComponent = class ManageBookComponent {\n  constructor(databaseService) {\n    this.databaseService = databaseService;\n    this.displayedColumns = ['id', 'bookId', 'userId', 'borrowedDate', 'hasReturned'];\n    this.totalBooksCount = 0;\n    this.pageSize = 8;\n    this.searchedInput = \"\";\n    this.currentPageIndex = 0;\n    this.role = \"student\";\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var data = yield _this.databaseService.getOrders().toPromise();\n      _this.orderList = data;\n      var data2 = yield _this.databaseService.getBooks().toPromise();\n      _this.bookList = data2;\n      var data3 = yield _this.databaseService.getUsers().toPromise();\n      _this.userList = data3;\n\n      _this.changeOrderFormat();\n    })();\n  }\n\n  changeOrderFormat() {\n    var orders;\n    var books;\n    var users;\n    orders = this.orderList;\n    books = this.bookList;\n    users = this.userList;\n\n    for (var i = 0; i < orders.length; i++) {\n      for (var j = 0; j < books.length; j++) {\n        if (orders[i].bookId == books[j].id) {\n          orders[i].bookId = books[j].bookName;\n        }\n      }\n\n      for (var j = 0; j < users.length; j++) {\n        if (orders[i].userId == users[j].id) {\n          orders[i].userId = users[j].userFirstName + \" \" + users[j].userLastName;\n        }\n      }\n\n      this.orders = orders;\n      this.orderList = orders;\n    }\n  }\n\n  changePage(event) {\n    var tempOrders = this.orderList;\n    this.orderList = tempOrders.slice(event.pageIndex * this.pageSize, (event.pageIndex + 1) * this.pageSize);\n  }\n\n  filterBooks(event) {\n    this.searchedInput = event.target.value;\n    this.orderList = this.orders;\n    var tempOrders = this.orderList;\n    var tempOrders2 = [];\n\n    for (var i = 0; i < tempOrders.length; i++) {\n      if (tempOrders[i].bookId.includes(this.searchedInput) || tempOrders[i].userId.includes(this.searchedInput)) {\n        tempOrders2.push(tempOrders[i]);\n      }\n    }\n\n    this.orderList = tempOrders2;\n    this.totalBooksCount = this.orderList.length;\n    this.orderList = this.orderList.slice(this.currentPageIndex * this.pageSize, (this.currentPageIndex + 1) * this.pageSize);\n  }\n\n};\nManageBookComponent = __decorate([Component({\n  selector: 'app-manage-book',\n  templateUrl: './manage-book.component.html',\n  styleUrls: ['./manage-book.component.scss']\n})], ManageBookComponent);\nexport { ManageBookComponent };","map":{"version":3,"sources":["C:/LibraryManagementSystem/librarymanagement/src/app/shared/manage-book/manage-book.component.ts"],"names":["__decorate","Component","ManageBookComponent","constructor","databaseService","displayedColumns","totalBooksCount","pageSize","searchedInput","currentPageIndex","role","ngOnInit","data","getOrders","toPromise","orderList","data2","getBooks","bookList","data3","getUsers","userList","changeOrderFormat","orders","books","users","i","length","j","bookId","id","bookName","userId","userFirstName","userLastName","changePage","event","tempOrders","slice","pageIndex","filterBooks","target","value","tempOrders2","includes","push","selector","templateUrl","styleUrls"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,IAAIC,mBAAmB,GAAG,MAAMA,mBAAN,CAA0B;AAChDC,EAAAA,WAAW,CAACC,eAAD,EAAkB;AACzB,SAAKA,eAAL,GAAuBA,eAAvB;AACA,SAAKC,gBAAL,GAAwB,CAAC,IAAD,EAAO,QAAP,EAAiB,QAAjB,EAA2B,cAA3B,EAA2C,aAA3C,CAAxB;AACA,SAAKC,eAAL,GAAuB,CAAvB;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,gBAAL,GAAwB,CAAxB;AACA,SAAKC,IAAL,GAAY,SAAZ;AACH;;AACKC,EAAAA,QAAQ,GAAG;AAAA;;AAAA;AACb,UAAIC,IAAI,SAAS,KAAI,CAACR,eAAL,CAAqBS,SAArB,GAAiCC,SAAjC,EAAjB;AACA,MAAA,KAAI,CAACC,SAAL,GAAiBH,IAAjB;AACA,UAAII,KAAK,SAAS,KAAI,CAACZ,eAAL,CAAqBa,QAArB,GAAgCH,SAAhC,EAAlB;AACA,MAAA,KAAI,CAACI,QAAL,GAAgBF,KAAhB;AACA,UAAIG,KAAK,SAAS,KAAI,CAACf,eAAL,CAAqBgB,QAArB,GAAgCN,SAAhC,EAAlB;AACA,MAAA,KAAI,CAACO,QAAL,GAAgBF,KAAhB;;AACA,MAAA,KAAI,CAACG,iBAAL;AAPa;AAQhB;;AACDA,EAAAA,iBAAiB,GAAG;AAChB,QAAIC,MAAJ;AACA,QAAIC,KAAJ;AACA,QAAIC,KAAJ;AACAF,IAAAA,MAAM,GAAG,KAAKR,SAAd;AACAS,IAAAA,KAAK,GAAG,KAAKN,QAAb;AACAO,IAAAA,KAAK,GAAG,KAAKJ,QAAb;;AACA,SAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAAM,CAACI,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpC,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAAK,CAACG,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACnC,YAAIL,MAAM,CAACG,CAAD,CAAN,CAAUG,MAAV,IAAoBL,KAAK,CAACI,CAAD,CAAL,CAASE,EAAjC,EAAqC;AACjCP,UAAAA,MAAM,CAACG,CAAD,CAAN,CAAUG,MAAV,GAAmBL,KAAK,CAACI,CAAD,CAAL,CAASG,QAA5B;AACH;AACJ;;AACD,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACE,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;AACnC,YAAIL,MAAM,CAACG,CAAD,CAAN,CAAUM,MAAV,IAAoBP,KAAK,CAACG,CAAD,CAAL,CAASE,EAAjC,EAAqC;AACjCP,UAAAA,MAAM,CAACG,CAAD,CAAN,CAAUM,MAAV,GAAmBP,KAAK,CAACG,CAAD,CAAL,CAASK,aAAT,GAAyB,GAAzB,GAA+BR,KAAK,CAACG,CAAD,CAAL,CAASM,YAA3D;AACH;AACJ;;AACD,WAAKX,MAAL,GAAcA,MAAd;AACA,WAAKR,SAAL,GAAiBQ,MAAjB;AACH;AACJ;;AACDY,EAAAA,UAAU,CAACC,KAAD,EAAQ;AACd,QAAIC,UAAU,GAAG,KAAKtB,SAAtB;AACA,SAAKA,SAAL,GAAiBsB,UAAU,CAACC,KAAX,CAAiBF,KAAK,CAACG,SAAN,GAAkB,KAAKhC,QAAxC,EAAkD,CAAC6B,KAAK,CAACG,SAAN,GAAkB,CAAnB,IAAwB,KAAKhC,QAA/E,CAAjB;AACH;;AACDiC,EAAAA,WAAW,CAACJ,KAAD,EAAQ;AACf,SAAK5B,aAAL,GAAqB4B,KAAK,CAACK,MAAN,CAAaC,KAAlC;AACA,SAAK3B,SAAL,GAAiB,KAAKQ,MAAtB;AACA,QAAIc,UAAU,GAAG,KAAKtB,SAAtB;AACA,QAAI4B,WAAW,GAAG,EAAlB;;AACA,SAAK,IAAIjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,UAAU,CAACV,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,UAAIW,UAAU,CAACX,CAAD,CAAV,CAAcG,MAAd,CAAqBe,QAArB,CAA8B,KAAKpC,aAAnC,KAAqD6B,UAAU,CAACX,CAAD,CAAV,CAAcM,MAAd,CAAqBY,QAArB,CAA8B,KAAKpC,aAAnC,CAAzD,EAA4G;AACxGmC,QAAAA,WAAW,CAACE,IAAZ,CAAiBR,UAAU,CAACX,CAAD,CAA3B;AACH;AACJ;;AACD,SAAKX,SAAL,GAAiB4B,WAAjB;AACA,SAAKrC,eAAL,GAAuB,KAAKS,SAAL,CAAeY,MAAtC;AACA,SAAKZ,SAAL,GAAiB,KAAKA,SAAL,CAAeuB,KAAf,CAAqB,KAAK7B,gBAAL,GAAwB,KAAKF,QAAlD,EAA4D,CAAC,KAAKE,gBAAL,GAAwB,CAAzB,IAA8B,KAAKF,QAA/F,CAAjB;AACH;;AA1D+C,CAApD;AA4DAL,mBAAmB,GAAGF,UAAU,CAAC,CAC7BC,SAAS,CAAC;AACN6C,EAAAA,QAAQ,EAAE,iBADJ;AAENC,EAAAA,WAAW,EAAE,8BAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,8BAAD;AAHL,CAAD,CADoB,CAAD,EAM7B9C,mBAN6B,CAAhC;AAOA,SAASA,mBAAT","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nlet ManageBookComponent = class ManageBookComponent {\r\n    constructor(databaseService) {\r\n        this.databaseService = databaseService;\r\n        this.displayedColumns = ['id', 'bookId', 'userId', 'borrowedDate', 'hasReturned'];\r\n        this.totalBooksCount = 0;\r\n        this.pageSize = 8;\r\n        this.searchedInput = \"\";\r\n        this.currentPageIndex = 0;\r\n        this.role = \"student\";\r\n    }\r\n    async ngOnInit() {\r\n        var data = await this.databaseService.getOrders().toPromise();\r\n        this.orderList = data;\r\n        var data2 = await this.databaseService.getBooks().toPromise();\r\n        this.bookList = data2;\r\n        var data3 = await this.databaseService.getUsers().toPromise();\r\n        this.userList = data3;\r\n        this.changeOrderFormat();\r\n    }\r\n    changeOrderFormat() {\r\n        var orders;\r\n        var books;\r\n        var users;\r\n        orders = this.orderList;\r\n        books = this.bookList;\r\n        users = this.userList;\r\n        for (var i = 0; i < orders.length; i++) {\r\n            for (var j = 0; j < books.length; j++) {\r\n                if (orders[i].bookId == books[j].id) {\r\n                    orders[i].bookId = books[j].bookName;\r\n                }\r\n            }\r\n            for (var j = 0; j < users.length; j++) {\r\n                if (orders[i].userId == users[j].id) {\r\n                    orders[i].userId = users[j].userFirstName + \" \" + users[j].userLastName;\r\n                }\r\n            }\r\n            this.orders = orders;\r\n            this.orderList = orders;\r\n        }\r\n    }\r\n    changePage(event) {\r\n        var tempOrders = this.orderList;\r\n        this.orderList = tempOrders.slice(event.pageIndex * this.pageSize, (event.pageIndex + 1) * this.pageSize);\r\n    }\r\n    filterBooks(event) {\r\n        this.searchedInput = event.target.value;\r\n        this.orderList = this.orders;\r\n        var tempOrders = this.orderList;\r\n        var tempOrders2 = [];\r\n        for (var i = 0; i < tempOrders.length; i++) {\r\n            if (tempOrders[i].bookId.includes(this.searchedInput) || tempOrders[i].userId.includes(this.searchedInput)) {\r\n                tempOrders2.push(tempOrders[i]);\r\n            }\r\n        }\r\n        this.orderList = tempOrders2;\r\n        this.totalBooksCount = this.orderList.length;\r\n        this.orderList = this.orderList.slice(this.currentPageIndex * this.pageSize, (this.currentPageIndex + 1) * this.pageSize);\r\n    }\r\n};\r\nManageBookComponent = __decorate([\r\n    Component({\r\n        selector: 'app-manage-book',\r\n        templateUrl: './manage-book.component.html',\r\n        styleUrls: ['./manage-book.component.scss']\r\n    })\r\n], ManageBookComponent);\r\nexport { ManageBookComponent };\r\n"]},"metadata":{},"sourceType":"module"}